// Copyright 2018 The Golem Language Authors. All rights reserved.
// Use of this source code is governed by a MIT-style
// license that can be found in the LICENSE file.

import regexp

fn fail(func, err) {
    try {
        func()
        assert(false)
    } catch e {
        assert(err == e.error)
    }
}

fn testCompile() {
    let rgx = regexp.compile('abc')
    assert(
        [rgx.matchString('xyzabcdef'), rgx.matchString('123')] == 
        [true, false])

    rgx = regexp.compile('^[a-z]+\\[[0-9]+\\]$')
    assert(
        [rgx.matchString('foo[123]'), rgx.matchString('456')] == 
        [true, false])

    fail(|| => regexp.compile('\\'), 
        'RegexpError: error parsing regexp: trailing backslash at end of expression: ``')
}

fn main(args) {
    testCompile()
}
